<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.project.mapper.RestaurantMapper">

    <select id="getCount" resultType="Integer">
        SELECT count(*)
        FROM restaurant
    </select>

    <insert id="restaurantSave" parameterType="RestaurantSaveDto">
        INSERT INTO restaurant (title
                            , category
                            , address
                            , writer
                            , pwd
                            , content)
        VALUES (#{title}
                , #{category}
                , #{address}
                , #{writer}
                , #{pwd}
                , #{content})
        <selectKey keyProperty="id" order="AFTER" resultType="Integer">
            SELECT LAST_INSERT_ID()
        </selectKey>
    </insert>

    <insert id="restaurantImgSave" parameterType="FileDto">
        INSERT INTO restaurant_file (orgin_name
                                , file_size
                                , file_url
                                , change_name
                                , restaurant_id)
        VALUES (#{orginName}
                , #{fileSize}
                , #{fileUrl}
                , #{changeName}
                , #{restaurantId})
    </insert>

</mapper>